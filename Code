// Note: Code will only work correctly / without errors on Windows devices.
#include <iostream>
#include <algorithm>
#include <random>
#include <ctime>
#include <limits>
#include <windows.h>

using namespace std;

// Function declarations
void game();
void displayRules();

int main() {
    SetConsoleOutputCP(CP_UTF8);
    game(); // this controls everything
    return 0;
}

// Runs the game itself
void game() {
    char homeInput;
    cout << "╔═══════════════════════════════════════════════╗\n";
    cout << "║             ╔═══╦╗ ╔╦═══╦╗╔═╦═══╗             ║\n";
    cout << "║             ║╔═╗║║ ║║╔═╗║║║╔╣╔═╗║             ║\n";
    cout << "║             ║║ ╚╣║ ║║╚═╝║╚╝╝║║ ║║             ║\n";
    cout << "║             ║║╔═╣║ ║║╔╗╔╣╔╗║║╚═╝║             ║\n";
    cout << "║             ║╚╩═║╚═╝║║║╚╣║║╚╣╔═╗║             ║\n";
    cout << "║             ╚═══╩═══╩╝╚═╩╝╚═╩╝ ╚╝             ║\n";
    cout << "╚═══════════════════════════════════════════════╝\n";
    cout << "            Press E to start the game            \n";
    cout << "            Press ? to view the rules            \n";
    cout << "            Press x to close the game            \n";
    cin >> homeInput;
    homeInput = tolower(homeInput);
    cout << "\n";

    if (homeInput == '/') {
        displayRules();
    } else if (homeInput == 'e') {
        cout << "Starting the game...\n";
    } else if (homeInput == 'x') {
        cout << "Exiting...\n";
        exit(0);
    } else {
        cout << "Invalid input. Please try again.\n";
        game(); // restart the prompt
    }
}

void displayRules() {
    char rulesInput;
    cout << "╔════════════════════════════════════════════════════════════════════════════════════════════════╗\n";
    cout << "║                                    The Rules of Gurka                                          ║\n";
    cout << "║                                                                                                ║\n";
    cout << "║Gurka is played by 3-7 players                                                                  ║\n";
    cout << "║Each player is dealt 6 cards                                                                    ║\n";
    cout << "║Player 1 goes first to start, and the winner of each trick (round) begins the next one          ║\n";
    cout << "║Play goes in numerical order (1, 2, 3, etc. for game start)                                     ║\n";
    cout << "║After the first card in each round, players must match or beat the value of the highest card    ║\n";
    cout << "║If this is not possible, your lowest value card must be played                                  ║\n";
    cout << "║Repeat this until all players have 1 card left                                                  ║\n";
    cout << "║The player with the lowest value card at the end wins                                           ║\n";
    cout << "╚════════════════════════════════════════════════════════════════════════════════════════════════╝\n";
    cout << "                             Press any key to return to the Main Menu                             \n";
    cout << "                                   Press 'x' to exit the game                                  \n";
    cin >> rulesInput;
    cout << "\n";

    if (rulesInput == 'x') {
        cout << "Exiting...\n";
        exit(0);
    } else {
        game();
    }
}
